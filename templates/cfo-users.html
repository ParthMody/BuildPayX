<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BuildPayX</title>
  <link rel="icon" href="{{ url_for('static', filename='assets/favicon.ico') }}">
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/bootstrap.css') }}"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendors/bootstrap-icons/bootstrap-icons.css') }}"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/app.css') }}"/>
</head>
<body>
  <div id="app">
    <!-- Sidebar -->
    <div id="sidebar" class="active">
      <div class="sidebar-wrapper active">
        <div class="sidebar-header d-flex justify-content-between">
          <div class="logo">
            <a href="{{ url_for('cfo_landing') }}">
              <img src="{{ url_for('static', filename='assets/images/logo/logo.png') }}" style="width:200px; height:70px;" alt="Logo">
            </a>
          </div>
          <div class="toggler">
            <a href="#" class="sidebar-hide d-xl-none d-block"><i class="bi bi-x bi-middle"></i></a>
          </div>
        </div>
        <div class="sidebar-menu">
          <ul class="menu">
            <li class="sidebar-title">Menu</li>
            <li class="sidebar-item">
              <a href="{{ url_for('cfo_landing') }}" class="sidebar-link">
                <i class="bi bi-grid-fill"></i>
                <span>Dashboard</span>
              </a>
            </li>
            <li class="sidebar-title">Pages</li>
            <li class="sidebar-item active">
              <a href="{{ url_for('cfo_users') }}" class="sidebar-link">
                <i class="bi bi-person-circle"></i>
                <span>Requesters</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a href="{{ url_for('cfonotifications') }}" class="sidebar-link">
                <i class="bi bi-chat-right-text-fill"></i>
                <span>Notifications</span>
              </a>
            </li>
            <!-- <li class="sidebar-item">
              <a href="{{ url_for('cfoprofile') }}" class="sidebar-link">
                <i class="bi bi-person-circle"></i>
                <span>Profile Settings</span>
              </a>
            </li> -->
          </ul>
        </div>
        <button class="sidebar-toggler btn x"><i data-feather="x"></i></button>
      </div>
    </div>

    <!-- Main Content -->
    <div id="main">
      <header class="mb-3">
        <a href="#" class="burger-btn d-block d-xl-none"><i class="bi bi-justify fs-3"></i></a>
      </header>

      <div class="page-heading">
        <h3>Requester List</h3>
        <p class="text-subtitle text-muted">Overview of all requesters and their PO uploads</p>
      </div>

      <div class="page-content">
        <section class="section">
          <div class="row justify-content-center">
            <div class="col-12 col-lg-10">
              <div class="card">
                <div class="card-header">
                  <h4>Requesters</h4>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table table-hover mb-0">
                      <thead class="table-light">
                        <tr>
                          <th>#</th>
                          <th>Username</th>
                          <th>Number of POs</th>
                          <th>View Uploads</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for user in users %}
                        <tr>
                          <td>{{ loop.index }}</td>
                          <td>{{ user.username }}</td>
                          <td>{{ user.po_count }}</td>
                          <td>
                            <a href="{{ url_for('cfo_user_uploads', user_id=user.id) }}"
                               class="btn btn-sm btn-outline-primary">View</a>
                          </td>
                        </tr>
                        {% else %}
                        <tr>
                          <td colspan="4" class="text-center text-muted">No requesters found.</td>
                        </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='assets/vendors/perfect-scrollbar/perfect-scrollbar.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/js/bootstrap.bundle.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/js/main.js') }}"></script>
</body>
</html>